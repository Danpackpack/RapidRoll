{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\game.js"],"names":["Ball","require","CameraManager","PrefabManager","cc","Class","extends","Component","properties","levDegree","ball","cameramanager","prefabmanager","scoreLabel","Label","lifeLabel","gameOverMenu","Node","overScore","bgSound","AudioClip","scoreSound","crashSound","overSound","onLoad","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","keyCode","KEY","back","director","loadScene","node","startGame","getCollisionManager","enabled","score","string","init","audioEngine","playMusic","stopGame","stopMusic","active","find","getComponent","updateScore","gainScore","playEffect","levelUp","toMenu"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,gBAAgBD,QAAQ,eAAR,CAApB;AACA,IAAIE,gBAAgBF,QAAQ,eAAR,CAApB;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAW,CADH,EACK;AACbC,cAAMV,IAFE;AAGRW,uBAAeT,aAHP;AAIRU,uBAAeT,aAJP;;AAMRU,oBAAYT,GAAGU,KANP;AAORC,mBAAWX,GAAGU,KAPN;AAQRE,sBAAcZ,GAAGa,IART;AASRC,mBAAWd,GAAGU,KATN;;AAWRK,iBAASf,GAAGgB,SAXJ;AAYRC,oBAAYjB,GAAGgB,SAZP;AAaRE,oBAAYlB,GAAGgB,SAbP;AAcRG,mBAAWnB,GAAGgB;AAdN,KAHP;;AAoBLI,YAAQ,kBAAY;AAChB;AACApB,WAAGqB,YAAH,CAAgBC,WAAhB,CAA4B;AACxBC,mBAAOvB,GAAGwB,aAAH,CAAiBC,QADA;AAExBC,0BAAc,sBAASC,OAAT,EAAkBJ,KAAlB,EAAyB;AACnC,oBAAGI,WAAW3B,GAAG4B,GAAH,CAAOC,IAArB,EAA2B;AACvB7B,uBAAG8B,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH;AACJ;AANuB,SAA5B,EAOE,KAAKC,IAPP;AAQA,aAAKC,SAAL;AACH,KA/BI;AAgCL;AACAA,eAAW,qBAAY;AACnBjC,WAAG8B,QAAH,CAAYI,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA,aAAKC,KAAL,GAAa,CAAb;AACA,aAAK3B,UAAL,CAAgB4B,MAAhB,GAAyB,SAAzB;AACA,aAAK1B,SAAL,CAAe0B,MAAf,GAAwB,GAAxB;AACA,aAAK9B,aAAL,CAAmB+B,IAAnB,CAAwB,IAAxB;AACA,aAAK9B,aAAL,CAAmB8B,IAAnB,CAAwB,IAAxB;AACA,aAAKhC,IAAL,CAAUgC,IAAV,CAAe,IAAf;AACAtC,WAAGuC,WAAH,CAAeC,SAAf,CAAyB,KAAKzB,OAA9B,EAAuC,IAAvC;AACH,KA1CI;AA2CL;AACA0B,cAAU,oBAAY;AAClBzC,WAAG8B,QAAH,CAAYI,mBAAZ,GAAkCC,OAAlC,GAA4C,KAA5C;AACAnC,WAAGuC,WAAH,CAAeG,SAAf,CAAyB,KAAK3B,OAA9B;AACAf,WAAGuC,WAAH,CAAeC,SAAf,CAAyB,KAAKrB,SAA9B;AACA,aAAKP,YAAL,CAAkB+B,MAAlB,GAA2B,IAA3B;AACA,aAAK7B,SAAL,CAAeuB,MAAf,GAAwB,kBAAkB,KAAKD,KAA/C;AACApC,WAAG4C,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,QAA/B,EAAyCC,WAAzC,CAAqD,KAAKV,KAA1D;AACH,KAnDI;AAoDL;AACAW,eAAW,qBAAY;AACnB/C,WAAGuC,WAAH,CAAeS,UAAf,CAA0B,KAAK/B,UAA/B;AACA,aAAKmB,KAAL,IAAc,EAAd;AACA,aAAK3B,UAAL,CAAgB4B,MAAhB,GAAyB,WAAW,KAAKD,KAAzC;AACH,KAzDI;AA0DL;AACAa,aAAS,mBAAY;AACjB,YAAG,KAAK5C,SAAL,IAAkB,GAArB,EAAyB;AACrB,iBAAKA,SAAL,GAAiB,GAAjB;AACH;AACD,aAAKA,SAAL,IAAkB,KAAlB;AACH,KAhEI;AAiEL;AACA6C,YAAQ,kBAAY;AAChBlD,WAAG8B,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACH;AApEI,CAAT","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nvar Ball = require(\"ball\");\r\nvar CameraManager = require(\"cameramanager\");\r\nvar PrefabManager = require(\"prefabmanager\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        levDegree: 0,//难度系数\r\n        ball: Ball,\r\n        cameramanager: CameraManager,\r\n        prefabmanager: PrefabManager,\r\n\r\n        scoreLabel: cc.Label,\r\n        lifeLabel: cc.Label,\r\n        gameOverMenu: cc.Node,\r\n        overScore: cc.Label,\r\n\r\n        bgSound: cc.AudioClip,\r\n        scoreSound: cc.AudioClip,\r\n        crashSound: cc.AudioClip,\r\n        overSound: cc.AudioClip,\r\n    },\r\n\r\n    onLoad: function () {\r\n        //返回键返回菜单\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.KEYBOARD,\r\n            onKeyPressed: function(keyCode, event) {\r\n                if(keyCode == cc.KEY.back) {\r\n                    cc.director.loadScene('Menu');\r\n                }\r\n            }\r\n        },this.node);\r\n        this.startGame();\r\n    },\r\n    //开始游戏\r\n    startGame: function () {\r\n        cc.director.getCollisionManager().enabled = true;\r\n        this.score = 0;\r\n        this.scoreLabel.string = \"SCORE:0\";\r\n        this.lifeLabel.string = \"2\";\r\n        this.cameramanager.init(this);\r\n        this.prefabmanager.init(this);\r\n        this.ball.init(this);\r\n        cc.audioEngine.playMusic(this.bgSound, true);\r\n    },\r\n    //停止游戏\r\n    stopGame: function () {\r\n        cc.director.getCollisionManager().enabled = false;\r\n        cc.audioEngine.stopMusic(this.bgSound);\r\n        cc.audioEngine.playMusic(this.overSound);\r\n        this.gameOverMenu.active = true;\r\n        this.overScore.string = \"FINAL SCORE  \" + this.score;\r\n        cc.find(\"Record\").getComponent(\"record\").updateScore(this.score);\r\n    },\r\n    //获得分数\r\n    gainScore: function () {\r\n        cc.audioEngine.playEffect(this.scoreSound);\r\n        this.score += 10;\r\n        this.scoreLabel.string = \"SCORE:\" + this.score;\r\n    },\r\n    //难度提升\r\n    levelUp: function () {\r\n        if(this.levDegree >= 0.5){\r\n            this.levDegree = 0.5;\r\n        }\r\n        this.levDegree += 0.005;\r\n    },\r\n    //返回菜单\r\n    toMenu: function () {\r\n        cc.director.loadScene(\"MenuScene\");\r\n    }\r\n});\r\n"]}